<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Yusuf Akdeniz | Palace Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;600;900&display=swap');
        :root { --accent: #ff2d55; --bg: #050505; --card: #121214; }
        body { font-family: 'Outfit', sans-serif; background: var(--bg); color: #fff; overflow-x: hidden; }
        
        .weekly-grid { display: grid; grid-template-columns: repeat(7, minmax(280px, 1fr)); gap: 15px; overflow-x: auto; padding-bottom: 20px; }
        .day-column { background: var(--card); border: 1px solid #1f1f23; border-radius: 20px; min-height: 500px; padding: 15px; }
        
        .personel-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .personel-card { background: #16161a; border-radius: 15px; padding: 15px; border-top: 3px solid var(--accent); }

        .custom-btn { background: var(--accent); transition: 0.3s; box-shadow: 0 5px 15px rgba(255, 45, 85, 0.3); }
        .custom-btn:active { transform: scale(0.95); }
        
        input, select, textarea { 
            background: #1c1c21 !important; border: 1px solid #2d2d35 !important; 
            border-radius: 12px !important; color: white !important; padding: 12px !important; width: 100%;
        }
        
        ::-webkit-scrollbar { height: 6px; width: 6px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body class="pb-10">

    <div id="login" class="fixed inset-0 bg-black z-[9999] flex flex-col items-center justify-center p-8">
        <h1 class="text-4xl font-black italic mb-2">YUSUF AKDENİZ</h1>
        <p class="text-gray-500 tracking-[5px] text-[10px] mb-10 uppercase font-bold">Hair Palace Executive</p>
        <div class="w-full max-w-xs space-y-4">
            <input id="u" type="text" placeholder="Yönetici ID">
            <input id="p" type="password" placeholder="Şifre">
            <button onclick="auth()" class="custom-btn w-full p-4 rounded-xl font-black uppercase">Sistemi Aç</button>
        </div>
    </div>

    <div id="app" class="hidden">
        <header class="p-6 flex justify-between items-center sticky top-0 bg-black/80 backdrop-blur-xl z-50 border-b border-white/5">
            <h2 class="text-xl font-black italic tracking-tighter">HAIR PALACE <span class="text-pink-600">.</span></h2>
            <div class="flex gap-4">
                <button onclick="tab('r')" class="text-xs font-black px-4 py-2 rounded-lg bg-white/5">RANDEVU</button>
                <button onclick="tab('p')" class="text-xs font-black px-4 py-2 rounded-lg bg-white/5">PERSONEL</button>
                <button onclick="tab('m')" class="text-xs font-black px-4 py-2 rounded-lg bg-white/5">MÜŞTERİ KARTLARI</button>
                <button onclick="location.reload()" class="text-pink-600 ml-4"><i class="fas fa-power-off"></i></button>
            </div>
        </header>

        <div id="v-r" class="view p-6">
            <div class="flex justify-between items-end mb-8">
                <div>
                    <h3 class="text-2xl font-black uppercase">Haftalık Ajanda</h3>
                    <p class="text-gray-500 text-xs">Randevuları sütunlar halinde yönetin</p>
                </div>
                <button onclick="showAddR()" class="custom-btn px-6 py-3 rounded-xl font-bold text-xs uppercase">+ Yeni Randevu</button>
            </div>

            <div class="weekly-grid no-scrollbar" id="weeklyGrid">
                </div>
        </div>

        <div id="v-p" class="view hidden p-6">
            <h3 class="text-2xl font-black uppercase mb-6">Personel Avans & Maaş Takip</h3>
            <div class="personel-grid" id="personelGrid">
                </div>
        </div>

        <div id="v-m" class="view hidden p-6">
            <div class="flex justify-between items-center mb-8">
                <h3 class="text-2xl font-black uppercase">Müşteri Kart Arşivi</h3>
                <button onclick="showAddM()" class="bg-blue-600 px-6 py-3 rounded-xl font-bold text-xs uppercase">+ Yeni Müşteri Kaydı</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="musteriList">
                </div>
        </div>
    </div>

    <div id="modalR" class="fixed inset-0 bg-black/90 z-[100] hidden flex items-center justify-center p-6 backdrop-blur-sm">
        <div class="executive-card p-8 w-full max-w-md space-y-4">
            <h2 class="text-xl font-black uppercase italic">Randevu Kaydet</h2>
            <input id="rn" type="text" placeholder="Müşteri Adı">
            <input id="ri" type="text" placeholder="Yapılacak İşlem">
            <div class="flex gap-2">
                <input id="rs" type="text" placeholder="Saat (Örn: 10:30)">
                <input id="rt" type="date">
            </div>
            <div class="flex gap-3">
                <button onclick="closeModal('modalR')" class="flex-1 bg-white/10 p-4 rounded-xl font-bold">İptal</button>
                <button onclick="saveR()" class="flex-1 custom-btn p-4 rounded-xl font-bold uppercase">Kaydı Tamamla</button>
            </div>
        </div>
    </div>

    <div id="modalM" class="fixed inset-0 bg-black/90 z-[100] hidden flex items-center justify-center p-6 backdrop-blur-sm">
        <div class="executive-card p-8 w-full max-w-md space-y-4">
            <h2 class="text-xl font-black uppercase italic text-blue-500">Yeni Müşteri Kartı</h2>
            <input id="mn" type="text" placeholder="Müşteri Adı Soyadı">
            <input id="mb" type="text" placeholder="Boya Numarası / Markası">
            <input id="mu" type="number" placeholder="Ödediği Ücret (TL)">
            <input id="mt" type="date" value="">
            <textarea id="mnnot" placeholder="Ekstra Notlar..." class="h-24"></textarea>
            <div class="flex gap-3">
                <button onclick="closeModal('modalM')" class="flex-1 bg-white/10 p-4 rounded-xl font-bold">İptal</button>
                <button onclick="saveM()" class="flex-1 bg-blue-600 p-4 rounded-xl font-bold uppercase">Kartı Oluştur</button>
            </div>
        </div>
    </div>

    <script>
        const DB_KEY = 'YAH_ULTIMATE_DB';
        let db = JSON.parse(localStorage.getItem(DB_KEY)) || { r: [], m: [], p: Array(10).fill().map((_, i) => ({ id: i, name: 'Personel ' + (i+1), logs: [] })) };

        function auth() {
            if(document.getElementById('u').value === 'admin' && document.getElementById('p').value === '1234') {
                document.getElementById('login').style.display = 'none';
                document.getElementById('app').classList.remove('hidden');
                init();
            } else alert("Hata!");
        }

        function tab(t) {
            document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
            document.getElementById('v-'+t).classList.remove('hidden');
            render();
        }

        function init() { render(); }

        function render() {
            renderRandevu();
            renderPersonel();
            renderMusteri();
        }

        function renderRandevu() {
            const grid = document.getElementById('weeklyGrid');
            grid.innerHTML = "";
            const today = new Date();
            
            for(let i=0; i<7; i++) {
                let d = new Date(); d.setDate(today.getDate() + i);
                let dStr = d.toISOString().split('T')[0];
                let dName = d.toLocaleDateString('tr-TR', { weekday: 'long', day: 'numeric', month: 'long' });
                
                let col = `<div class="day-column">
                    <h4 class="font-black uppercase text-sm mb-6 pb-2 border-b border-white/5 text-pink-600">${i===0 ? 'BUGÜN' : dName}</h4>
                    <div class="space-y-3">`;
                
                db.r.filter(x => x.tarih === dStr).sort((a,b)=>a.saat.localeCompare(b.saat)).forEach(r => {
                    col += `<div class="bg-white/5 p-4 rounded-xl border-l-4 border-pink-500 relative group">
                        <p class="font-black text-sm">${r.ad}</p>
                        <p class="text-[10px] font-bold text-gray-500 uppercase">${r.saat} - ${r.islem}</p>
                        <button onclick="del('r',${r.id})" class="absolute top-2 right-2 text-xs text-red-900 opacity-0 group-hover:opacity-100"><i class="fas fa-trash"></i></button>
                    </div>`;
                });

                col += `</div></div>`;
                grid.innerHTML += col;
            }
        }

        function renderPersonel() {
            const grid = document.getElementById('personelGrid');
            grid.innerHTML = "";
            db.p.forEach((p, idx) => {
                let card = `<div class="personel-card">
                    <input onchange="updPN(${idx}, this.value)" value="${p.name}" class="text-xs font-black uppercase mb-4 text-pink-500 bg-transparent border-none p-0">
                    <div class="space-y-2 mb-4 max-h-40 overflow-y-auto pr-2">`;
                p.logs.forEach(l => {
                    card += `<div class="flex justify-between text-[10px] bg-black/20 p-2 rounded"><span>${l.txt}</span><span class="text-red-500">-${l.val}</span></div>`;
                });
                card += `</div>
                    <div class="flex gap-1">
                        <input id="pv-${idx}" type="number" placeholder="₺" class="p-1 text-xs">
                        <button onclick="addPL(${idx})" class="bg-white text-black text-[10px] px-2 rounded font-black">EKLE</button>
                    </div>
                </div>`;
                grid.innerHTML += card;
            });
        }

        function renderMusteri() {
            const list = document.getElementById('musteriList');
            list.innerHTML = "";
            db.m.sort((a,b)=> new Date(b.tarih) - new Date(a.tarih)).forEach(m => {
                list.innerHTML += `<div class="executive-card p-6 border-l-4 border-blue-600">
                    <div class="flex justify-between items-start mb-4">
                        <h4 class="font-black uppercase text-lg">${m.ad}</h4>
                        <span class="text-xs font-black text-blue-500">${m.ücret} TL</span>
                    </div>
                    <div class="space-y-2 text-xs text-gray-400">
                        <p><i class="fas fa-palette mr-2"></i> <b>Boya:</b> ${m.boya}</p>
                        <p><i class="fas fa-calendar-alt mr-2"></i> <b>Tarih:</b> ${m.tarih}</p>
                        <p class="bg-black/40 p-3 rounded-lg mt-3 italic leading-relaxed">"${m.not}"</p>
                    </div>
                    <button onclick="del('m',${m.id})" class="mt-4 text-[10px] text-red-900 uppercase font-black"><i class="fas fa-trash mr-1"></i> Kartı Sil</button>
                </div>`;
            });
        }

        // ACTIONS
        function showAddR() { document.getElementById('modalR').classList.remove('hidden'); }
        function showAddM() { document.getElementById('modalM').classList.remove('hidden'); }
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }

        function saveR() {
            const ad = document.getElementById('rn').value, islem = document.getElementById('ri').value, saat = document.getElementById('rs').value, tarih = document.getElementById('rt').value;
            if(!ad || !tarih) return;
            db.r.push({ id: Date.now(), ad, islem, saat, tarih });
            save(); closeModal('modalR');
        }

        function saveM() {
            const ad = document.getElementById('mn').value, boya = document.getElementById('mb').value, ücret = document.getElementById('mu').value, tarih = document.getElementById('mt').value, not = document.getElementById('mnnot').value;
            if(!ad) return;
            db.m.push({ id: Date.now(), ad, boya, ücret, tarih, not });
            save(); closeModal('modalM');
        }

        function updPN(idx, val) { db.p[idx].name = val; save(); }
        function addPL(idx) {
            const val = document.getElementById('pv-'+idx).value;
            if(!val) return;
            db.p[idx].logs.push({ txt: 'Avans', val: val });
            save();
        }

        function del(key, id) { if(confirm('Emin misin?')) { db[key] = db[key].filter(x => x.id !== id); save(); } }
        function save() { localStorage.setItem(DB_KEY, JSON.stringify(db)); render(); }

    </script>
</body>
</html>
